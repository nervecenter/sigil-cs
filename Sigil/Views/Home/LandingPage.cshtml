@using Microsoft.AspNet.Identity

<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="shortcut icon" href="~/Content/Images/favicon.png" />

    <script src="~/Scripts/jquery-1.8.3.js"></script>
    <script src="~/Scripts/jquery-ui-1.9.2.custom.min.js"></script>
    <link href="~/Content/jquery-ui-1.9.2.custom.min.css" rel="stylesheet" />

    <script type="text/javascript">
    $(function () {
        $('#searchBox').autocomplete({
            source: '@Url.Action("SearchDB","Search")'
        });
    });
    </script>

    @Styles.Render( "~/Content/bootstrap.css" )
    @Styles.Render( "~/Content/bootstrap-theme.css" )
    @Styles.Render( "~/Content/Site.css" )

    <script type="text/javascript" src="~/Scripts/bootstrap.js"></script>
    <script type="text/javascript" src="~/Scripts/voting.js"></script>
    <script type="text/javascript" src="~/Scripts/subscriptions.js"></script>

    <title>Sigil</title>
</head>
<body class="page">
    <div class="page-container">
        <header class="page-header page-header-landing">
            @using ( Html.BeginForm( "Index", "Search", FormMethod.Post, new { @class = "search-box-form landing-search-form" } ) ) {
                <button class="search-submit-button landing-search-submit-button" type="submit"><img src="../Content/Images/search-icon-small.png"></button>
                <input id="searchBox" name="term" class="search-query landing-search-query" type="text" placeholder="Search for a company, organization, or person">
            }
            <nav class="header-link-container landing-header-link-container">
                @Html.ActionLink( "Log in", "Login", "Account", routeValues: null, htmlAttributes: new { @class = "header-link" } )
                @Html.ActionLink( "Register", "Register", "Account", routeValues: null, htmlAttributes: new { @class = "header-link" } )
            </nav>
        </header>
        <section class="sale">
            <div class="sale-back-darken"></div>
            <div class="sale-back"></div>
            <!--<img class="sale-back-img" src="../Content/Images/saleback.jpg"></img>-->
            <img class="sale-logo" src="../Content/Images/logo-600.png">
            <div class="sale-point-area">
                <div class="sale-point sale-point-first">
                    <img class="sale-image" src="../Content/Images/earth_white.png">
                    <p class="sale-text">We connect big and small. Engage with your favorite companies, elected officials, or even your employer.</p>
                </div>
                <div class="sale-point">
                    <img class="sale-image" src="../Content/Images/speakerphone_white.png">
                    <p class="sale-text">Have a voice in the future. Your feedback matters. Make your thoughts known, and support those of your peers.</p>
                </div>
                <div class="sale-point">
                    <img class="sale-image" src="../Content/Images/speedometer_white.png">
                    <p class="sale-text">The best gauge of the direction your company should take is customer demand. Know exactly what your users want the most.</p>
                </div>
            </div>
        </section>
        @using Sigil.Models
        @model List<IGrouping<string, Issue>>
        <div class="container landing-container">
            <div class="row">
                @foreach ( var group in Model ) {
                    <div class="col-md-4 col-lg-4">
                        <div class="panel panel-default">
                            <div class="panel-heading">@group.Key</div>
                            <div class="panel-body">
                                @foreach ( Issue issue in group ) {
                                    <div class="issue-vote-area">
                                        <span class="issue-vote-amount" id="count-1">@issue.votes</span>
                                    </div>
                                    <div class="issue-main-area issue-main-area-small">
                                        <div class="issue-main-cell">
                                            <div class="issue-title-area issue-main-sub-areas issue-main-sub-areas-small"><a href="/@issue.Org.orgURL/@issue.Id" class="issue-title">@issue.title</a></div>
                                            <div class="issue-info-area issue-main-sub-areas issue-main-sub-areas-small">
                                                <span class="issue-org-cat-topic">
                                                    <a href="/@issue.Org.orgURL"><img class="issue-info-icon" src="../Content/Images/orgicons/microsoft_20.png">@issue.Org.orgName</a>
                                                    @if ( issue.CatId != 0 ) {
                                                        <a href="/@issue.Org.orgURL/@issue.Category.catURL"><img class="issue-info-icon" src="../Content/Images/caticons/windows_20.png">@issue.Category.catName</a>
                                                    }
                                                </span>
                                                <br>
                                                <span class="issue-user-date issue-user-date-small">
                                                    @Sigil.Controllers.IssueController.TimeSince( issue.createTime ) by
                                                    <img class="issue-info-icon" src="../Content/Images/usericons/nervecenter_20.png">@issue.AspNetUser.UserName
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                }
                            </div>
                        </div>
                    </div>
                }
            </div>

        </div>
    </div>
    @Html.Partial( "_Footer" )
    @{
        //}@RenderSection( "scripts", required: false )
    }
</body>
</html>
