@using Microsoft.AspNet.Identity
@using Sigil.Models

@model List<IGrouping<Org, Issue>>

<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="shortcut icon" href="~/Content/Images/favicon.png" />

    <script src="~/Scripts/jquery-1.8.3.js"></script>
    <script src="~/Scripts/jquery-ui-1.9.2.custom.min.js"></script>
    <link href="~/Content/jquery-ui-1.9.2.custom.min.css" rel="stylesheet" />

    @Styles.Render( "~/Content/bootstrap.css" )
    @Styles.Render( "~/Content/bootstrap-theme.css" )
    @Styles.Render( "~/Content/Site.css" )

    <style type="text/css">
        .media-heading {
            font-size:14px;
            font-weight: 600;
        }

        .media-body {
            font-size: 12px;
        }
    </style>

  
    <title>Sigil</title>
</head>
<body class="page">
    @*<header class="page-header page-header-landing">
        @using ( Html.BeginForm( "Index", "Search", FormMethod.Post, new { @class = "search-box-form landing-search-form" } ) ) {
            <button class="search-submit-button landing-search-submit-button" type="submit"><img src="../Content/Images/search-icon-small.png"></button>
                <input id="searchBox" name="term" class="search-query landing-search-query" type="text" placeholder="Search for a company, organization, or person">
        }
        <nav class="header-link-container landing-header-link-container">
            @Html.ActionLink( "Log in", "Login", "Account", routeValues: null, htmlAttributes: new { @class = "header-link" } )
            @Html.ActionLink( "Register", "Register", "Account", routeValues: null, htmlAttributes: new { @class = "header-link" } )
            @Html.ActionLink( "Register Organization", "OrgRegister", "Account", routeValues: null, htmlAttributes: new { @class = "header-link" } )
        </nav>
    </header>*@
    <nav class="navbar transparent navbar-static-top">
        <div class="navbar-inner">
            <!-- Brand and toggle get grouped for better mobile display -->

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav navbar-center">
                    <li style="margin-left:30%;width:40%;display:inline-block;">
                        @using ( Html.BeginRouteForm( "Search Page", FormMethod.Post, new {@class = "navbar-form navbar-left", role = "search", style = "padding-left:-50%;width:100%;" } ) ) {
                            <div class="form-group" style="width:100%;">
                                <input id="searchBox" type="text" class="form-control" placeholder="Search for a company, person, or product" autocomplete="on" style="width:100%;">
                            </div>
                        }
                    </li>
                    <li class="pull-right">@Html.ActionLink( "Register", "Register", "Account", routeValues: null, htmlAttributes: new { @class = "header-link" } )</li>
                    <li class="pull-right">@Html.ActionLink( "Log in", "Login", "Account", routeValues: null, htmlAttributes: new { @class = "header-link" } )</li>
                </ul>
            </div><!-- /.navbar-collapse -->
        </div><!-- /.container-fluid -->
    </nav>
    <section class="sale">
        <div class="sale-back-darken"></div>
        <div class="sale-back"></div>
        <!--<img class="sale-back-img" src="../Content/Images/saleback.jpg"></img>-->
        <div class="container" style="max-width:800px; margin-top:-350px;">
            <div class="row" style="margin-bottom:40px;">
                <div class="col-lg-12 col-centered" style="max-width:350px;">
                    <img class="img-responsive" src="../Content/Images/logo-600.png">
                </div>
            </div>
            <div class="row landing-blurbs">
                <div class="col-lg-4">
                    <img class="landing-blurb-image" src="../Content/Images/earth_white.png">
                    <p class="landing-blurb-text">We connect big and small. Engage with your favorite companies, elected officials, or even your employer.</p>
                </div>
                <div class="col-lg-4 hidden-xs hidden-sm">
                    <img class="landing-blurb-image" src="../Content/Images/speakerphone_white.png">
                    <p class="landing-blurb-text">Have a voice in the future. Your feedback matters. Make your thoughts known, and support those of your peers.</p>
                </div>
                <div class="col-lg-4 hidden-xs hidden-sm">
                    <img class="landing-blurb-image" src="../Content/Images/speedometer_white.png">
                    <p class="landing-blurb-text">The best gauge of the direction your company should take is customer demand. Know exactly what your users want the most.</p>
                </div>
            </div>
        </div>
    </section>
    <div class="container landing-container">
        <div class="row">
            @foreach ( var group in Model ) {
                <div class="col-md-4 col-lg-4">
                    <div class="panel panel-default">
                        <div class="panel-heading"><a href="/@group.Key.orgName"><img src="@(Sigil.Controllers.ImageController<Org>.Get_Icon_20(group.Key))" style="margin-right:5px;"/>@group.Key.orgName</a></div>
                        @*<div class="panel-body"></div>*@
                        @foreach ( Issue issue in group ) {
                            var issuePanelModel = new Tuple<IssuePanelOptions, Issue>( new IssuePanelOptions() { inPanel = false, showOrg = true, showCat = false, showTopic = false, showUser = false, userVoted = false }, issue );
                            @Html.Partial( "../Shared/_IssuePanelPartial", issuePanelModel)
                        }
                    </div>
                </div>
            }
        </div>
    </div>
    @Html.Partial( "_Footer" )
    <script type="text/javascript" src="~/Scripts/bootstrap.js"></script>
    <script type="text/javascript" src="~/Scripts/voting.js"></script>
    <script type="text/javascript" src="~/Scripts/subscriptions.js"></script>
    <script type="text/javascript" src="~/Scripts/Search.js"></script>
</body>
</html>
